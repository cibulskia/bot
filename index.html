<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botanica Dashboard</title>
    <!-- Google prijava skripta -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Font Awesome za ikone -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts - Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Naš CSS fajl -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <!-- Sekcija za prijavu putem Google-a -->
        <div id="login-section" class="auth-card">
            <img src="logo.png" alt="Botanica Icon" class="app-logo">
            <h2>Dobrodošli u Botanica Dashboard</h2>
            <p>Molimo prijavite se putem Google naloga za pristup.</p>
            <div id="g_id_onload"
                 data-client_id="252373158568-4up41b7jo8ik6cu8c1pl3mlvvck2sq2t.apps.googleusercontent.com"
                 data-callback="handleCredentialResponse">
            </div>
            <div class="g_id_signin" data-type="standard" data-size="large" data-theme="outline" data-text="signin_with" data-shape="rectangular" data-logo_alignment="left"></div>
        </div>

        <!-- Glavna sekcija aplikacije, prikazuje se tek nakon uspešne prijave -->
        <div id="main-section" class="dashboard-layout" style="display:none;">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img src="logo.png" alt="Botanica Icon" class="sidebar-logo">
                    <h3>Botanica Admin</h3>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li class="nav-item active" onclick="showSection('user-settings-tab')">
                            <i class="fas fa-cog"></i> Korisnička podešavanja
                        </li>
                        <li class="nav-item" onclick="showSection('categories-tab')">
                            <i class="fas fa-list-alt"></i> Upravljanje kategorijama
                        </li>
                        <li class="nav-item" onclick="showSection('logs-tab')">
                            <i class="fas fa-file-alt"></i> Logovi
                        </li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <p>Prijavljen: <span id="user-email"></span></p>
                    <button class="btn btn-logout" onclick="signOut()"><i class="fas fa-sign-out-alt"></i> Odjavi se</button>
                </div>
            </aside>

            <main class="content-area">
                <header class="navbar">
                    <h1>Dashboard</h1>
                    <div class="navbar-actions">
                        <button class="btn btn-icon"><i class="fas fa-bell"></i></button>
                        <button class="btn btn-icon"><i class="fas fa-user-circle"></i></button>
                    </div>
                </header>

                <div id="user-settings-tab" class="tab-content active">
                    <div class="card">
                        <h3><i class="fas fa-cog"></i> Korisnička podešavanja</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="discord-token">Discord Token</label>
                                <input type="text" id="discord-token" placeholder="Unesite Discord Token">
                            </div>
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="is-checkbox">
                                <label for="is-checkbox">Aktivno polje</label>
                            </div>
                            <div class="form-group full-width">
                                <label for="general-response">Generalni odgovor</label>
                                <textarea id="general-response" placeholder="Unesite generalni odgovor..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="user-rule">Pravilo</label>
                                <select id="user-rule">
                                    <option value="">-- Izaberi pravilo --</option>
                                    <option value="A">Pravilo A</option>
                                    <option value="B">Pravilo B</option>
                                    <option value="C">Pravilo C</option>
                                    <option value="D">Pravilo D</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="user-client-email">Email klijenta (opciono)</label>
                                <input type="email" id="user-client-email" placeholder="client@example.com">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveUserSettings()"><i class="fas fa-save"></i> Sačuvaj podešavanja</button>
                            <button class="btn btn-secondary" onclick="fetchUserSettings()"><i class="fas fa-sync-alt"></i> Dohvati podešavanja</button>
                        </div>
                        <div class="data-display mt-3">
                            <h4>Trenutna podešavanja</h4>
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Discord Token</th>
                                            <th>Aktivno</th>
                                            <th>Generalni Odgovor</th>
                                            <th>Pravilo</th>
                                            <th>Email Klijenta</th>
                                        </tr>
                                    </thead>
                                    <tbody id="user-settings-table-body">
                                        <!-- Podaci će se ovde dinamički učitavati -->
                                        <tr><td colspan="5" class="text-center">Nema podataka za prikaz.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="categories-tab" class="tab-content">
                    <div class="card">
                        <h3><i class="fas fa-list-alt"></i> Upravljanje kategorijama</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="seq-num">Redni broj (1-99)</label>
                                <input type="number" id="seq-num" placeholder="npr. 15" min="1" max="99">
                            </div>
                            <div class="form-group">
                                <label for="priority">Prioritet (0-9)</label>
                                <input type="number" id="priority" placeholder="npr. 5" min="0" max="9">
                            </div>
                            <div class="form-group">
                                <label for="rule">Pravilo</label>
                                <select id="rule">
                                    <option value="A">Pravilo A</option>
                                    <option value="B">Pravilo B</option>
                                    <option value="C">Pravilo C</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label for="response">Odgovor</label>
                                <textarea id="response" placeholder="Unesite odgovor za kategoriju..."></textarea>
                            </div>
                            <div class="form-group full-width">
                                <label for="tags">Tagovi (razdvojeni zarezom)</label>
                                <input type="text" id="tags" placeholder='npr. cveće, bašta, proleće'>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveCategory()"><i class="fas fa-save"></i> Sačuvaj kategoriju</button>
                            <button class="btn btn-secondary" onclick="fetchCategories()"><i class="fas fa-sync-alt"></i> Dohvati kategorije</button>
                            <button class="btn btn-info" onclick="populateCategoryFields()"><i class="fas fa-magic"></i> Popuni po rednom broju</button>
                        </div>
                        <div class="data-display mt-3">
                            <h4>Postojeće kategorije</h4>
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Redni broj</th>
                                            <th>Prioritet</th>
                                            <th>Pravilo</th>
                                            <th>Odgovor</th>
                                            <th>Tagovi</th>
                                            <th>Akcije</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categories-table-body">
                                        <!-- Podaci će se ovde dinamički učitavati -->
                                        <tr><td colspan="6" class="text-center">Nema podataka za prikaz.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="logs-tab" class="tab-content">
                    <div class="card">
                        <h3><i class="fas fa-file-alt"></i> Logovi sistema</h3>
                        <p>Ovde bi se prikazivali logovi sistema.</p>
                        <pre id="logs-output" class="code-block">Nema logova za prikaz.</pre>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Naš JavaScript fajl (mora biti nakon DOM elemenata koje manipuliše) -->
    <script src="script.js"></script>
</body>
</html>
